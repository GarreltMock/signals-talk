const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-CyuhWAhA.js","assets/monaco/bundled-types-BTx04qH9.js","assets/modules/file-saver-BirHVELW.js","assets/modules/vue-Ce80C8wT.js","assets/monaco/bundled-types-BykuiZxs.css","assets/modules/shiki-DoHTQ3py.js","assets/modules/shiki-Bxv373Z5.css"])))=>i.map(i=>d[i]);
import{t as S,d as I,H as D,o as u,b as p,Y as H,A as J,a1 as z,N as F,ae as K,M as W,G as q,J as G,a5 as U,e as V,x as $,K as b,F as E,a2 as R,c as Y,i as Q,g as M,af as X,h as Z,l as ee,k as te}from"../modules/vue-Ce80C8wT.js";import{_ as j,j as ne,d as re,b as A}from"../monaco/bundled-types-BTx04qH9.js";import{k as se,m as ie}from"../index-DedeRbMv.js";import{u as oe}from"./context-DDcQjs4q.js";import{_ as ae}from"./IconButton.vue_vue_type_script_setup_true_lang-BPiA5iZJ.js";import"../modules/file-saver-BirHVELW.js";import"../modules/shiki-DoHTQ3py.js";let C=null;function N(n){const t=new Set;return{get value(){return C&&t.add(C),n},set value(r){n=r,t.forEach(d=>d())}}}function L(n){C=n,n(),C=null}function ce(n){const t=N();return L(()=>{t.value=n()}),t}const le=Object.freeze(Object.defineProperty({__proto__:null,derived:ce,effect:L,signal:N},Symbol.toStringTag,{value:"Module"})),B={"./signals.js":le};function ue(n){return n}var de=ue;const pe=de(()=>({async vue(n){const t=await j(()=>import("../modules/vue-Ce80C8wT.js").then(s=>s.aS),[]),{parse:r,compileScript:d}=await j(async()=>{const{parse:s,compileScript:o}=await import("../modules/vue-Ce80C8wT.js").then(l=>l.aT);return{parse:s,compileScript:o}},[]),i=r(n);let a=d(i.descriptor,{id:i.descriptor.filename,genDefaultAs:"__Component",inlineTemplate:!0}).content;a=a.replace(/import ({[^}]+}) from ['"]vue['"]/g,(s,o)=>`const ${o.replace(/\sas\s/g,":")} = Vue`),a+=`
return __Component`;const c=new Function(`return (Vue) => {${a}}`)()(t),f=t.createApp(c),e=document.createElement("div");return f.mount(e),{element:e}},async javascript(n,t){const r=document.getElementById("button1");if(r){const d=r.cloneNode(!0);r.replaceWith(d)}return await t.run(n,"js")}})),fe=[pe],me=ne(async()=>{const n={javascript:O,js:O,typescript:O,ts:O},{getHighlighter:t}=await j(async()=>{const{getHighlighter:i}=await import("./shiki-CyuhWAhA.js");return{getHighlighter:i}},__vite__mapDeps([0,1,2,3,4,5,6])),r=await t(),d=async(i,a,c)=>{try{const f=n[a];if(!f)throw new Error(`Runner for language "${a}" not found`);return await f(i,{options:c,highlight:r,run:async(e,s)=>await d(e,s,c)})}catch(f){return console.error(f),{error:`${f}`}}};for(const i of fe){const a=await i(n);Object.assign(n,a)}return{highlight:r,run:d}});function _e(n){const t=S([]),r=e=>t.value.push({error:String(e)}),d=(...e)=>t.value.push(e.map(a)),i=Object.assign({},console);i.info=i.log=i.debug=i.warn=i.error=d,i.clear=()=>t.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
      try {
        ${f(n)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(i,s=>{const o=B[s];if(!o)throw new Error(`Module not found: ${s}.
Available modules: ${Object.keys(B).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return o},r)}catch(e){r(e)}function a(e){return typeof e=="string"?{text:e}:{text:c(e),highlightLang:"javascript"}}function c(e){var o;let s="";if(e instanceof Error)s=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")s=String(e);else if(Array.isArray(e))s=`[${e.map(c).join(", ")}]`;else if(e instanceof Set){const l=[...e];s=`Set (${e.size}) {${l.map(c).join(", ")}}`}else if(e instanceof Map){const l=[...e.entries()];s=`Map (${e.size}) {${l.map(([m,_])=>`${c(m)} => ${c(_)}`).join(", ")}}`}else if(e instanceof RegExp)s=e.toString();else if(typeof e=="string")s=JSON.stringify(e);else if(typeof e=="object"){const l=((o=e.constructor)==null?void 0:o.name)??"",m=l&&l==="Object"?"":l;s=(m?`${m}: `:"")+JSON.stringify(e,(y,g)=>g===void 0?"__undefined__":g,2).replace(/"__undefined__"/g,"undefined"),s=String(s)}else s=String(e);return s}function f(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let k;async function O(n){k??(k=await j(()=>import("../monaco/bundled-types-BTx04qH9.js").then(r=>r.t),__vite__mapDeps([1,2,3,4]))),n=k.transpileModule(n,{compilerOptions:{module:k.ModuleKind.ESNext,target:k.ScriptTarget.ES2022},transformers:{after:[he]}}).outputText;const t=/import\s*\((.+)\)/g;return n=n.replace(t,(r,d)=>`__slidev_import(${d})`),_e(n)}function he(n){const{factory:t}=n,{isImportDeclaration:r,isNamedImports:d,NodeFlags:i}=k;return a=>{var f,e;const c=[...a.statements];for(let s=0;s<c.length;s++){const o=c[s];if(!r(o))continue;let l;const m=(f=o.importClause)==null?void 0:f.namedBindings,_=[];if((e=o.importClause)!=null&&e.name&&_.push(t.createBindingElement(void 0,t.createIdentifier("default"),o.importClause.name)),m)if(d(m)){for(const g of m.elements)_.push(t.createBindingElement(void 0,g.propertyName,g.name));l=t.createObjectBindingPattern(_)}else l=t.createIdentifier(m.name.text);else l=t.createObjectBindingPattern(_);const y=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(l,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[o.moduleSpecifier])))],i.Const));c[s]=y}return t.updateSourceFile(a,c)}}const ge=I({__name:"DomElement",props:{element:{}},setup(n){const t=n,r=S();return D(()=>{r.value&&r.value.appendChild(t.element)}),(d,i)=>(u(),p("div",{ref_key:"container",ref:r},null,512))}}),ve={key:0,class:"text-sm text-center opacity-50"},ye={key:1,class:"text-sm text-center opacity-50"},be={key:2,class:"text-sm text-center opacity-50"},Se=["innerHTML"],we={key:1,class:"text-red-500"},xe={key:3,class:"output-line"},Ee=["innerHTML"],ke={key:2,class:"separator"},Oe={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Me=I({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(n,{emit:t}){const r=n,d=t,{isPrintMode:i}=se(),a=H(r,"modelValue",d),{$renderContext:c,$clicksContext:f}=oe(),e=J(()=>!["slide","presenter"].includes(c.value)),s=i.value?"once":r.autorun,o=S(s),l=z(),m=S(0),_=S(),y=S(r.showOutputAt);if(r.showOutputAt){const w=ie();F(()=>{const v=f.calculate(r.showOutputAt);v?(f.register(w,v),K(()=>{y.value=!v.isActive.value})):y.value=!1}),W(()=>f.unregister(w))}const g=re(200,async()=>{if(e.value)return;const{highlight:w,run:v}=await me();_.value=w;const h=setTimeout(()=>{o.value=!0},500);l.value=await v(a.value,r.lang,r.runnerOptions??{}),m.value+=1,o.value=!1,clearTimeout(h)});return s==="once"?g():s&&q(a,g,{immediate:!0}),(w,v)=>(u(),p(E,null,[G(V("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Z({height:r.height}),"data-waitfor":".slidev-runner-output"},[e.value?(u(),p("div",ve,' Code is disabled in the "'+$(b(c))+'" mode ',1)):o.value?(u(),p("div",ye," Running... ")):l.value?(u(),p("div",{key:`run-${m.value}`,class:"slidev-runner-output"},[(u(!0),p(E,null,R(b(A)(X(l.value)),(h,P)=>(u(),p(E,{key:P},["html"in h?(u(),p("div",{key:0,innerHTML:h.html},null,8,Se)):"error"in h?(u(),p("div",we,$(h.error),1)):"element"in h?(u(),Y(ge,{key:2,element:h.element},null,8,["element"])):(u(),p("div",xe,[(u(!0),p(E,null,R(b(A)(h),(x,T)=>(u(),p(E,{key:T},[x.highlightLang&&_.value?(u(),p("span",{key:0,class:"highlighted",innerHTML:_.value(x.text,x.highlightLang)},null,8,Ee)):(u(),p("span",{key:1,class:Q(x.class)},$(x.text),3)),T<b(A)(h).length-1?(u(),p("span",ke,",")):M("v-if",!0)],64))),128))]))],64))),128))])):(u(),p("div",be," Click the play button to run the code "))],4),[[U,!y.value]]),b(a).trim()?(u(),p("div",Oe,[ee(ae,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:b(g)},{default:te(()=>v[0]||(v[0]=[V("div",{class:"i-carbon:play"},null,-1)])),_:1},8,["onClick"])])):M("v-if",!0)],64))}});export{Me as default};
