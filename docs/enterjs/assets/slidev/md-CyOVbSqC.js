const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/CodeRunner-Dh6mwrVX.js","assets/modules/vue-C8brqZMv.js","assets/monaco/bundled-types-DUvhlk_N.js","assets/modules/file-saver-BirHVELW.js","assets/monaco/bundled-types-Bkc48CKc.css","assets/index-vjAlWFRk.js","assets/modules/shiki-CcvHWrIq.js","assets/modules/shiki-Bxv373Z5.css","assets/index-Bi7QaLrJ.css","assets/slidev/context-nhDDcFcM.js","assets/slidev/IconButton.vue_vue_type_script_setup_true_lang-Cm-gX2Jn.js","assets/CodeRunner-DcJPFc8h.css"])))=>i.map(i=>d[i]);
import{_ as b,f as U}from"../monaco/bundled-types-DUvhlk_N.js";import{d as Q,t as u,A as k,a2 as G,N as J,n as A,o as z,b as X,e as g,h as q,c as D,K as m,g as ee,a3 as te,k as oe,l as ne,m as ae,q as ie,s as re}from"../modules/vue-C8brqZMv.js";import{l as N}from"../lz-string-Do_w-xIU.js";import{k as se,m as W}from"../index-vjAlWFRk.js";import{u as F,f as le}from"./context-nhDDcFcM.js";import{I as de}from"./default-6sI04CDs.js";import"../modules/file-saver-BirHVELW.js";import"../modules/shiki-CcvHWrIq.js";const ue={class:"relative slidev-monaco-container"},ce=Q({__name:"Monaco",props:{codeLz:{default:""},diffLz:{},lang:{default:"typescript"},readonly:{type:Boolean,default:!1},lineNumbers:{default:"off"},height:{default:"initial"},editorOptions:{},ata:{type:Boolean,default:!0},runnable:{type:Boolean,default:!1},writable:{},autorun:{type:[Boolean,String],default:!0},showOutputAt:{type:[null,Boolean,String,Number,Array]},outputHeight:{},highlightOutput:{type:Boolean,default:!0},runnerOptions:{}},setup(w){const e=w,B=te(()=>b(()=>import("./CodeRunner-Dh6mwrVX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(d=>d.default)),r=u(N.decompressFromBase64(e.codeLz).trimEnd()),h=e.diffLz&&u(N.decompressFromBase64(e.diffLz).trimEnd()),E=k(()=>e.writable&&!e.readonly&&!1),c={ts:"typescript",js:"javascript"}[e.lang]??e.lang,s={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[e.lang]??e.lang,v=u(),C=u(),y=u(0),l=u(),H=k(()=>e.height==="auto"?`${y.value}px`:e.height==="initial"?`${l.value}px`:e.height),S=u(),{$page:R,$renderContext:I}=F(),{currentSlideNo:j}=se(),Y=G(()=>Math.abs(R.value-j.value)<=1&&S.value,d=>{["slide","presenter"].includes(I.value)?d():setTimeout(d,5e3)}),x=()=>window.devicePixelRatio/2||1;return J(async()=>{var O;const{default:d}=await b(async()=>{const{default:t}=await import("../monaco/bundled-types-DUvhlk_N.js").then(a=>a.x);return{default:t}},__vite__mapDeps([2,3,1,4])),{ata:p,monaco:o,editorOptions:K}=await d(),f=o.editor.createModel(r.value,c,o.Uri.parse(`file:///${W()}.${s}`));f.onDidChangeContent(()=>r.value=f.getValue());const M={automaticLayout:!0,readOnly:e.readonly,lineNumbers:e.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,useInlineViewWhenSpaceIsLimited:!1,...K,...e.editorOptions,fontSize:(((O=e.editorOptions)==null?void 0:O.fontSize)??11.5)*x()};let n;if(h){const t=o.editor.createModel(h.value,c,o.Uri.parse(`file:///${W()}.${s}`));t.onDidChangeContent(()=>r.value=f.getValue());const a=o.editor.createDiffEditor(C.value,{renderOverviewRuler:!1,...M});a.setModel({original:f,modified:t});const i=a.getOriginalEditor(),_=a.getModifiedEditor(),V=()=>{const $=Math.max(i.getContentHeight(),_.getContentHeight())+4;l.value??(l.value=$),y.value=$,A(()=>a.layout())};i.onDidContentSizeChange(V),_.onDidContentSizeChange(V),n=_}else{const t=o.editor.create(C.value,{model:f,lineDecorationsWidth:0,...M});t.onDidContentSizeChange(a=>{const i=a.contentHeight+4;l.value??(l.value=i),y.value=i,A(()=>n.layout())}),n=t}S.value=()=>{Y(),b(()=>import("../monaco/bundled-types-DUvhlk_N.js").then(t=>t.y),__vite__mapDeps([2,3,1,4])),e.ata&&(p(n.getValue()),n.onDidChangeModelContent(U(1e3,()=>{p(n.getValue())})))};const Z=n.layoutContentWidget.bind(n);n.layoutContentWidget=t=>{Z(t),t.getId()==="editor.contrib.resizableContentHoverWidget"&&(t._resizableNode.domNode.style.transform=t._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},n.addAction({id:"slidev-save",label:"Save",keybindings:[o.KeyMod.CtrlCmd|o.KeyCode.KeyS],run:()=>{E.value,console.warn("[Slidev] this monaco editor is not writable, save action is ignored.")}}),A(()=>o.editor.remeasureFonts()),setTimeout(()=>o.editor.remeasureFonts(),1e3);const L=()=>{var i;const t=x(),a=(((i=e.editorOptions)==null?void 0:i.fontSize)??12)*t;n.updateOptions({fontSize:a}),o.editor.remeasureFonts()};window.addEventListener("resize",L),window.addEventListener("devicePixelRatioChange",L)}),(d,p)=>(z(),X("div",ue,[g("div",{ref_key:"outer",ref:v,class:"relative slidev-monaco-container-inner",style:q({height:H.value})},[g("div",{ref_key:"container",ref:C,class:"absolute inset-0.5"},null,512)],4),e.runnable?(z(),D(m(B),{key:0,modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=o=>r.value=o),lang:m(c),autorun:e.autorun,"show-output-at":e.showOutputAt,height:e.outputHeight,"highlight-output":e.highlightOutput,"runner-options":e.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):ee("v-if",!0)]))}}),_e={__name:"pitfalls.md__slidev_16",setup(w){const{$slidev:e,$nav:B,$clicksContext:r,$clicks:h,$page:E,$renderContext:P,$frontmatter:c}=F();return r.setup(),(T,s)=>{const v=ce;return z(),D(de,ie(re(m(le)(m(c),15))),{default:oe(()=>[s[0]||(s[0]=g("h1",null,"Fallgrube #1",-1)),s[1]||(s[1]=g("p",null,"Signals auspacken",-1)),ne(v,ae({runnable:"","code-lz":"JYWwDg9gTgLgBAbzgZ2AcwHYEMA2cC+cAZlBCHAEQB0A9KprslQFbIUBQAxhBsvERAhwAvCnTYcACiKMApgEp2XHsgg5ZVHBDTTBi9sCJxdEeYnZxLcbrzUatOigAlcWuAFEMMWVABSAZQpFfCUbPjgsEWJBKgA3XABXWTgaGgi4YHCMYE4AC3gQWVyoOChZLABrGGBY9iA=",lang:"js"},{}),null,16)]),_:1},16)}}};export{_e as default};
